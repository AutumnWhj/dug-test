<template>
  <div class="pt-4 flex flex-col items-center relative mb-20 mx-5 md:mx-0">
    <div class="w-full md:w-2/5 card-shadow flex flex-col bg-white py-10 px-8 rounded-3xl">
      <div class="flex flex-col items-center mb-16">
        <el-image class="h-16 w-16 mb-4" :src="logoTextImage" />
        <div class="text-sm text-black font-bold mb-6">{{ $t('agreement.title') }}</div>
        <el-scrollbar ref="scrollbar" height="28rem" :always="true" @scroll="handleScroll">
          <div class="text-xs text-black leading-normal px-6">
            <h2 class="text-center">DUG Soltutions Service Agreement</h2>
            Terms and Conditions Applicable to DUG Solutions Service Agreement I.Description of Software Support A.Software Support Subject
            to the terms and conditions set forth below, DUG Solutions agrees to provide and the Customer agrees to purchase DUG Solutions
            licensed point of sale system (the "DUG Solutions System). In providing Software Support to the Customer, DUG Solutions agrees
            to per form the following services: 1. Correct any defects or replace any of the DUG Solutions System found to be in substantial
            non-conformance with the program specifications; 2. Provide the Customer with enhancements, as they become available, to the DUG
            Solutions System. DUG Solutions reserves the right to determine what constitutes an enhancement; enhancements billable to DUG
            Solutions are billable to Customer. 3. Provide reasonable remote technical assistance and consultation to the Customer with
            respect to use of the DUG Solutions System. Any assistance required to fulfill DUG Solutions's obligations under this Agreement,
            will be provided at no additional charge unless such assistance is found to be the result of hardware failure, user error,
            neglect or negligence. Assistance required as a result of such failure, user error, neglect or negligence will be compensated by
            the Customer at DUG Solutions's standard hourly rate then in effect, plus reasonable expenses for transportation, meals and
            lodging. B. Excluded Service DUG Solutions is not obligated to provide service under the Agreement for service necessitated by
            vandalism, theft, misuse, hardware malfunction, neglect, acts of third parties, fire, water, casualty, act of God, mob violence,
            labor disputes, malfunction of affiliated equipment, unauthorized modification of the software, electrical failure, accidents,
            climatic conditions, or from other causes unrelated to the ordinary operation of the software. This Agreement is void if service
            is performed on the software by unauthorized individuals,or if attempts are made to modify the software or use the software in a
            manner not set out in the instruction manual or license agreement. Should it be necessary to perform services outlined in this
            agreement at the Customer's site, Customer shall be responsible for actual out-of-pocket expenses incurred in travel. C.
            Response Time There is no guaranty regarding the response time to a service call from the Customer. DUG Solutions will respond
            to software service calls in the order received and will make every effort to respond within the same work day. DUG Solutions,
            however, has established a priority coding system for each problem reported. 1. 'A' Priority - A software error renders the
            entire system inoperable. Resources assigned within one (1) hour. Resources continue to work on the problem during normal
            business hours (and then some) until the problem is resolved. Averagere solution time less than 8 hours. 2. 'B' Priority - A
            software error is detected for a system module which seriously impairs systems operations, but does not render it "down."
            Resources are assigned within four (4) hours and remain assigned until completed, work continues during normal business hours.
            3. 'C' Priority - Minor problem, but sufficient severity as to warrant correction before the next software release. Generally
            completed within 30 days. 4. 'D' Priority - "Would likes" and minor problems which will be incorporated in future software
            releases. DUG Solutions reserves the right to determine "would like" relevance to the package and the scheduling of the
            development and release of such items. D.Excused Performance DUG Solutions shall not be liable for any failure to perform or
            delayed performance of any obligation under the Agreement if such performance is prevented, hindered or delayed for any cause
            beyond the reasonable control of DUG Solutions, including, without limitation, any labor dispute, strike or other industrial
            disturbance, act of God, flood, shortage of materials, earthquakes, casualty, war,act of public enemy, riot, insurrection,
            embargo law, blockage, action, restriction and regulation or order of any government, government agency or subdivision thereof,
            or climatic conditions. II.Breach or Default If customer does not pay the amounts due hereunder or breaches any terms of this
            agreement or any other Agreement with DUG Solutions, DUG Solutions may terminate this agreement effective upon written notice to
            the Customer. III.General A.Free access. DUG Solutions shall have free access to the equipment and software to perform service
            thereon. B.Customer agrees to pay all sales taxes where applicable for services rendered pursuant to this agreement. C.Customer
            shall provide equipment key operators for instruction in use of the equipment. D.Assignment - The Customer's rights and
            obligations created under this Agreement shall not be assignable by the Customer, in whole or in part, by operation of law or
            otherwise, without the prior written consent of the DUG Solutions, which shall not be unreasonably withheld. DUG Solutions may
            terminate this Agreement if the equipment is relocated. E. Construction - The execution of this Agreement shall not effect, in
            any way, any of the terms and conditions of the DUG Solutions System granted to the Customer pursuant to the other Agreement
            between the parties. F. Binding Effect - The Customer agrees that this Agreement binds the named Customer and each of its
            employee, agents and representatives, as well as its successors, assigns and trustees. G.Written Agreement - This Agreement
            supersedes any prior Agreement written or oral between the parties and contains the entire understanding between the parties
            relative to maintenance of the DUG Solutions System and except as provided herein, may be amended and/or altered only by
            execution of an instrument in writing. H.Attorney's Fees and Collection Costs - If DUG Solutions employs any attorney or a
            collection agency, or both, to collect an amount owed by the Customer or to enforce any rights under this Agreement, the
            Customer shall pay DUG Solutions any such reasonable attorney or collection fees and costs incurred in addition to any other
            relief to which DUG Solutions may be entitled. IV.Length of Plan - Automatic Renewal This Agreement is effective from the
            commencement date and shall continue for the initial period. Thereafter, this Agreement shall automatically be renewed at the
            then current rates for successive one (1) year periods unless terminated sooner by either party on no less than sixty (60) days'
            prior written notice to the other party. The prices, terms and conditions for such successive term(s) shall be those in effect
            at the time of renewal. All Agreements shall be billed for one year in advance. V.Cancellation of Agreement The Customer may
            terminate this Agreement upon any anniversary of the Commencement Date of this Agreement by giving written notice of such
            termination no less than sixty (60) days prior to such anniversary date. DUG Solutions may terminate this Agreement any time if
            the Customer shall fail make to any required service payment pursuant to the payment terms set forth above. VI.Software
            Maintenance Service Hours For purposes of this Agreement, the period of maintenance service availability will be during normal
            business hours, 10:00 a.m. to 10:00 p.m. (EST), Monday through Saturday. Remote/Telephone Maintenance Services provided during
            weekends, normal holidays, (which include: New Year's Day, Memorial Day, Independence Day, Labor Day, Thanksgiving Day,
            Christmas Day and Christmas Eve) and after normal business hours are restricted to “A Priority” . Any maintenance services
            performed during weekends, holidays and after hours other than listed above shall be at DUG Solutions's standard hourly rate
            then in effect for the day or holiday, plus travel expenses. VII.Fees, Invoice, Payment and Taxes A.Fees. In consideration any
            DUG Solutions System and/or Services purchased by you, you will pay all fees specified in each Order Form (“Fees”). Except as
            otherwise specified herein or in an Order Form, all Fees are no- cancel able and non-refundable.DUG Solutions reserved the right
            to change DUG Solutions System license monthly subscription fees. B. Invoicing. You are responsible for providing complete and
            accurate billing and contact information toDUG Solutions and notifying DUG Solutions of any changes to such information. If you
            provide ACH information to DUG Solutions, you authorize DUG Solutions to debit your account all Fees listed in the Order Forms.
            If an Order Form specifies that payment will be made by a credit card, you will provide DUG Solutions with valid and updated
            credit card information, or alternative document reasonably acceptable to DUG Solutions. You may be subject to additional
            transactional or service fees by credit card payment. DUG Solutions will invoice you in advance in accordance with the relevant
            Order Form before DUG Solutions delivers the DUG Solutions System and/or Services . C. Payment. You agree to pay for all
            uncontested amounts due under each Oder Form upon your receipt of DUG Solutions invoices. All amounts stated in and payable as
            specified in the applicable Order Form and shall be paid in U.S. Dollars or in such other currency as agreed to in writing by
            the parties. Unpaid invoices that are not the subject of a written good faith dispute are subject to a finance charge of 1.5% of
            the outstanding balance per month, or the maximum rate permitted by law, whichever is lower, plus all reasonable expenses of
            collection. D.Taxes. In addition to the charges due under this Agreement or Order Forms, and even if you provide a tax exemption
            number or affidavit of exemption, You shall be responsible for all taxes (including sales, use,property, excise, value added and
            gross receipts but not including taxes based on DUG Solutions's net income) and import duties and fees levied on DUG Solutions
            Software, Hardware and/or Services provided under this Agreement. You agree that if any of the foregoing is paid by DUG
            Solutions, you shall reimburse DUG Solutions for the amount paid plus any related expenses incurred and interest assessed. In
            the event that you are required by any with holding tax or other similar law to deduct any amount from the amounts due to DUG
            Solutions under this Agreement, you agree that you will pay a sufficiently higher amount so that the net amounts received by DUG
            Solutions after such withholding equal what was invoiced. VIII.Warranties. DUG SOLUTIONS’S OBLIGATIONS AND WARRANTIES UNDER THIS
            AGREEMENT ARE IN LIEU OF (A) ALL OTHER WARRANTIES, EXPRESSED OR IMPLIED INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY AND
            FITNESS FOR A PARTICULAR PURPOSE, WHICH ARE SPECIFICALLY WAIVED AND (B) ALL OTHER OBLIGATIONS OR LIABILITIES FOR DAMAGES
            INCLUDING, BUT NOT LIMITED TO: 1) PERSONAL INJURY OR PROPERTY DAMAGE, OR 2) LOSS OF PROFIT OR OTHER CONSEQUENTIAL DAMAGES
            ARISING OUT OF OR IN CONNECTION WITH THIS AGREEMENT; OR THE MAINTENANCE SERVICE CAUSED DIRECTLY OR INDIRECTLY BY STRIKES,
            ACCIDENTS, CLIMATIC CONDITIONS, OR REASON OF SIMILAR NATURE BEYOND ITS CONTROL. CUSTOMER AGREES THAT IF DUG SOLUTIONS CAUSED ANY
            INJURY OR DAMAGE TO CUSTOMER OR CUSTOMER’S PROPERTY, WHICH SAID CLAIM IS NOT OTHERWISE WAIVED HEREIN, CUSTOMER AGREES THAT THE
            MAXIMUM AMOUNT THAT DUG SOLUTIONS SHALL HAVE TO PAY CUSTOMER FOR SAID INJURY OR DAMAGE IS AN AMOUNT EQUAL TO THE AMOUNT PAID FOR
            SERVICES RENDERED TO THE CUSTOMER THAT CAUSED SAID INJURY OR DAMAGE
          </div>
        </el-scrollbar>
      </div>
      <el-button class="w-2/3 self-center !rounded-3xl mb-8" size="large" :color="buttonStyle.color" @click="toRestaurant">
        {{ buttonStyle.message }}
      </el-button>
    </div>
  </div>
  <LeaveMessage class="fixed left-14 bottom-14 w-auto" />
</template>

<script lang="ts" setup>
  import { useRouter } from 'vue-router';
  import LeaveMessage from '../components/LeaveMessage.vue';
  import logoTextImage from '/@/assets/images/logo_text.png';
  import { useI18n } from 'vue-i18n';
  const { t } = useI18n();
  const router = useRouter();
  // const route = useRoute();
  // const { id = '' } = route.query || '';
  const toRestaurant = () => {
    if (isScrollBottom.value && time.value === 0) {
      router.push(`/bind`);
    }
  };
  const scrollbar = ref();
  const isScrollBottom = ref(false);
  const handleScroll = () => {
    const { wrapRef } = scrollbar.value;
    isScrollBottom.value = wrapRef.scrollHeight - (wrapRef.scrollTop + wrapRef.clientHeight + 1) <= 1;
  };
  const time = ref(14);
  let timer: any = ref(null);
  onMounted(() => {
    scrollbar.value.handleScroll();
    timer.value = setInterval(() => {
      time.value = time.value - 1;
      if (time.value === 0) {
        clearInterval(timer.value);
      }
    }, 1000);
  });
  const buttonStyle = computed(() => {
    if (time.value > 0) {
      return {
        color: '#A6A6A6',
        message: ` ${t('agreement.scroll.one')} （ ${time.value} s）`,
      };
    } else {
      if (!isScrollBottom.value) {
        return {
          color: '#A6A6A6',
          message: ` ${t('agreement.scroll.two')}`,
        };
      } else {
        return {
          color: '#2C72FE',
          message: `${t('agreement.scroll.three')}`,
        };
      }
    }
  });
</script>
